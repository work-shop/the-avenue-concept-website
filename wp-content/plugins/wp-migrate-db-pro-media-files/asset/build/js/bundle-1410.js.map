{"version":3,"sources":["webpack:///webpack/bootstrap eee631b94823d18c27f2","webpack:///./src/wp-migrate-db-pro-media-files/asset/webpack.index.js","webpack:///./src/wp-migrate-db-pro-media-files/asset/src ./node_modules/imports-loader","webpack:///./src/wp-migrate-db-pro-media-files/asset/src/js/script.js","webpack:///./src/wp-migrate-db-pro-media-files/asset/src/sass/styles.scss"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","req","keys","forEach","key","map","./js/script.js","./sass/styles.scss","webpackContext","webpackContextResolve","id","Error","resolve","window","wpmdb","mediaFiles","remote_media_files_unavailable","$","remote_max_upload_size","$mf_select_subsites_section","$mf_select_subsites","size","obj","hasDontEnumBug","toString","propertyIsEnumerable","dontEnums","dontEnumsLength","length","_typeof","TypeError","prop","result","push","disable_media_files_option","attr","addClass","hide","hide_show_options","unavailable","mig_type","functions","wpmdb_migration_type","inArray","show","remote_connection_data","wpmdb_data","media_files_version","html","url","is_multisite","subsites","undefined","get_subsites","$_mf_selected_subsites","selected_subsites","val","parseJSON","remove","update_multiselect","apply_filters","change","maybe_show_data_and_files_differ_notice","removeAttr","removeClass","migrate_media_files_recursive","args","files_to_migrate","total_size","setTimeout","do_action","media_files_max_file_uploads","common","next_step_in_migration","fn","finalise_media_migration","execute_next_step","file_chunk_to_migrate","file_chunk_size","number_of_files_to_migrate","each","index","value","error_msg","wpmdbmf_strings","file_too_large","non_fatal_errors","bottleneck","media_progress_image_number","migration_error","ajax","ajaxurl","type","dataType","cache","data","action","migration_state_id","file_chunk","nonce","nonces","migrate_media","error","jqXHR","textStatus","errorThrown","current_migration","setState","migration_failed","wpmdbGetAjaxErrors","responseText","console","log","migration_complete_events","success","original_data","wpmdb_parse_json","trim","wpmdb_error","wpmdb_non_fatal_error","body","transfers","timeout","transfer","model","getStageModel","setItemComplete","file","media_progress","is_media_migration","filter_migration_profile_ready","is","alert","please_select_a_subsite","compare_remove_warning_toggle","element","$notice","selected_tables","table_prefix","files_differ","table_name","table_is","subsite_for_table","maybe_add_mf_progress_stage","addStage","strings","itemsName","wpmdb_strings","files","prepare_remove_all_files","connection_info","split","media_type","setActiveStage","title","setText","prepare_determine_media","remove_files_recursive","remove_files","old_args","compare","offset","JSON","stringify","error_determining","wpmdb_call_next_hook","remove_local_media","copy_entire_media","determining","determine_progress","determine_media_to_migrate_recursive","attachment_count","media_successfully_determined","remote_uploads_url","blogs","attachment_batch_limit","_","filepath","addStageItem","parseInt","fixProgressStageWidthForScrollBar","percent","Math","min","overall_percent","floor","width","max_request","document","ready","add_action","wpmdb_toggle_migration_action_text","connection_data","media_files_available","add_filter","hooks","on","jQuery"],"mappings":"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","file":"wp-migrate-db-pro-media-files/asset/build/js/bundle-1410.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap eee631b94823d18c27f2","/*\nFormat:\n\nrequire.context(directory, useSubdirectories = false, regExp = /^\\.\\//)\n\n*/\nlet req = require.context(\n\t'imports-loader?$=>window.jQuery!./src',\n\ttrue,\n\t/^(.*\\.(js|sass|scss$))/im\n);\n\nreq.keys().forEach( function( key ) {\n\treq( key );\n} );\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/wp-migrate-db-pro-media-files/asset/webpack.index.js","var map = {\n\t\"./js/script.js\": 2,\n\t\"./sass/styles.scss\": 3\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/wp-migrate-db-pro-media-files/asset/src ./node_modules/imports-loader?$=>window.jQuery ^(.*\\.(js|sass|scss$))/i\n// module id = 1\n// module chunks = 0","window.wpmdb = window.wpmdb || {};\n\nwpmdb.mediaFiles = {\n\tremote_media_files_unavailable: false\n};\n\n(function( $, wpmdb ) {\n\tvar remote_max_upload_size = 0;\n\tvar $mf_select_subsites_section = $( '#mf-select-subsites-section' );\n\tvar $mf_select_subsites = $( '#mf-select-subsites' );\n\n\t// TODO: move polyfills and/or decide if they're necessary\n\t// .length doesn't work on JS \"associative arrays\" i.e. objects with key/value elements, this does\n\tif ( ! Object.size ) {\n\t\tObject.size = function( obj ) {\n\t\t\tvar size = 0, key;\n\t\t\tfor ( key in obj ) {\n\t\t\t\tif ( obj.hasOwnProperty( key ) ) {\n\t\t\t\t\tsize++;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn size;\n\t\t};\n\t}\n\n\t// From https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\n\tif ( ! Object.keys ) {\n\t\tObject.keys = ( function() {\n\t\t\t'use strict';\n\t\t\tvar hasOwnProperty = Object.prototype.hasOwnProperty,\n\t\t\t\thasDontEnumBug = ! ( { toString: null } ).propertyIsEnumerable( 'toString' ),\n\t\t\t\tdontEnums = [\n\t\t\t\t\t'toString',\n\t\t\t\t\t'toLocaleString',\n\t\t\t\t\t'valueOf',\n\t\t\t\t\t'hasOwnProperty',\n\t\t\t\t\t'isPrototypeOf',\n\t\t\t\t\t'propertyIsEnumerable',\n\t\t\t\t\t'constructor'\n\t\t\t\t],\n\t\t\t\tdontEnumsLength = dontEnums.length;\n\n\t\t\treturn function( obj ) {\n\t\t\t\tif ( 'object' !== typeof obj && ( 'function' !== typeof obj || null === obj ) ) {\n\t\t\t\t\tthrow new TypeError( 'Object.keys called on non-object' );\n\t\t\t\t}\n\n\t\t\t\tvar result = [], prop, i;\n\n\t\t\t\tfor ( prop in obj ) {\n\t\t\t\t\tif ( hasOwnProperty.call( obj, prop ) ) {\n\t\t\t\t\t\tresult.push( prop );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( hasDontEnumBug ) {\n\t\t\t\t\tfor ( i = 0; i < dontEnumsLength; i++ ) {\n\t\t\t\t\t\tif ( hasOwnProperty.call( obj, dontEnums[ i ] ) ) {\n\t\t\t\t\t\t\tresult.push( dontEnums[ i ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t};\n\t\t}() );\n\t}\n\n\tvar disable_media_files_option = function() {\n\t\t$( '#media-files' ).attr( 'data-available', '0' );\n\t\t$( '#media-files' ).prop( 'checked', false );\n\t\t$( '#media-files' ).attr( 'disabled', 'disabled' );\n\t\t$( '.media-files' ).addClass( 'disabled' );\n\t\t$( '.media-files-options .expandable-content' ).hide();\n\t};\n\n\tvar hide_show_options = function( unavailable ) {\n\t\tvar mig_type = wpmdb.functions.wpmdb_migration_type();\n\n\t\tif ( -1 !== $.inArray( mig_type, [ 'savefile', 'find_replace', 'import' ] ) ) {\n\t\t\t$( '.media-files-options' ).hide();\n\t\t\treturn;\n\t\t}\n\n\t\t$( '.media-files-options' ).show();\n\t\t$( '.media-files-push' ).hide();\n\n\t\tif ( unavailable ) {\n\t\t\t$( '.media-files-options ul' ).hide();\n\t\t\t$( '.media-migration-unavailable' ).show();\n\t\t\tdisable_media_files_option();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( 'undefined' !== typeof wpmdb.mediaFiles.remote_connection_data && wpmdb_data.media_files_version !== wpmdb.mediaFiles.remote_connection_data.media_files_version ) {\n\t\t\t$( '.media-files-remote-location' ).html( wpmdb.mediaFiles.remote_connection_data.url );\n\t\t\t$( '.media-file-remote-version' ).html( wpmdb.mediaFiles.remote_connection_data.media_files_version );\n\t\t\t$( '.media-files-different-plugin-version-notice' ).show();\n\t\t\tdisable_media_files_option();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( 'true' === wpmdb_data.is_multisite ) {\n\t\t\tvar subsites = get_subsites();\n\n\t\t\tvar $_mf_selected_subsites = $( '#_mf-selected-subsites' );\n\t\t\tvar selected_subsites = $( '#mf-selected-subsites' ).val();\n\t\t\tif ( 'pull' === mig_type && 0 < Object.size( subsites ) && $_mf_selected_subsites.length ) {\n\t\t\t\tselected_subsites = $.parseJSON( $_mf_selected_subsites.val() );\n\t\t\t\t$_mf_selected_subsites.remove();\n\t\t\t}\n\t\t\twpmdb.functions.update_multiselect( '#mf-selected-subsites', subsites, selected_subsites );\n\n\t\t\tvar enable_select_subsites = $.wpmdb.apply_filters( 'wpmdbmf_enable_select_subsites', true );\n\n\t\t\tif ( enable_select_subsites ) {\n\t\t\t\t$mf_select_subsites_section.show();\n\t\t\t} else {\n\t\t\t\t$mf_select_subsites.prop( 'checked', false );\n\t\t\t\t$mf_select_subsites_section.hide();\n\t\t\t}\n\t\t\t$mf_select_subsites.change();\n\n\t\t\tmaybe_show_data_and_files_differ_notice();\n\t\t}\n\n\t\t$( '.media-files-options ul' ).show();\n\t\t$( '.media-migration-unavailable' ).hide();\n\t\t$( '.media-files-different-plugin-version-notice' ).hide();\n\t\t$( '#media-files' ).removeAttr( 'disabled' );\n\t\t$( '.media-files' ).removeClass( 'disabled' );\n\t\t$( '#media-files' ).attr( 'data-available', '1' );\n\t};\n\n\twpmdb.functions.prepare_remove_all_files = function() {\n\t\twpmdb.mediaFiles.connection_info = $.trim( $( '.pull-push-connection-info' ).val() ).split( '\\n' );\n\t\tvar media_type = $( 'input[name=\"media_migration_option\"]:checked' ).val();\n\n\t\twpmdb.current_migration.model.setActiveStage( 'media' );\n\n\t\t// this only needs to be run if we are skipping the comparison\n\t\tif ( 'entire' === media_type ) {\n\t\t\tvar title = 'removing_all_files_' + wpmdb.functions.wpmdb_migration_type();\n\t\t\twpmdb.current_migration.setText( wpmdbmf_strings[ title ] );\n\n\t\t\t// start recursive batch delete of local files\n\t\t\tvar args = {};\n\t\t\targs.remove_files = 1;\n\t\t\targs.compare = 0;\n\t\t\targs.offset = 0;\n\t\t\targs.next_step_in_migration = wpmdb.functions.prepare_determine_media;\n\t\t\twpmdb.common.next_step_in_migration = { fn: wpmdb.functions.remove_files_recursive, args: [ args ] };\n\t\t\twpmdb.functions.execute_next_step();\n\n\t\t} else {\n\n\t\t\t// We are doing the comparison so lets start the determine\n\t\t\twpmdb.common.next_step_in_migration = { fn: wpmdb.functions.prepare_determine_media };\n\t\t\twpmdb.functions.execute_next_step();\n\t\t}\n\t};\n\n\twpmdb.functions.remove_files_recursive = function( args ) {\n\t\tif ( 0 === args.remove_files ) {\n\n\t\t\t// All files removed lets start the migration\n\t\t\tif ( false !== args.next_step_in_migration ) {\n\t\t\t\twpmdb.common.next_step_in_migration = { fn: args.next_step_in_migration };\n\t\t\t\twpmdb.functions.execute_next_step();\n\t\t\t} else {\n\t\t\t\twpmdb.functions.wpmdb_call_next_hook();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\t\twpmdb.mediaFiles.connection_info = $.trim( $( '.pull-push-connection-info' ).val() ).split( '\\n' );\n\n\t\tvar old_args = args;\n\n\t\t$.ajax( {\n\t\t\turl: ajaxurl,\n\t\t\ttype: 'POST',\n\t\t\tdataType: 'text',\n\t\t\tcache: false,\n\t\t\tdata: {\n\t\t\t\taction: 'wpmdbmf_remove_files_recursive',\n\t\t\t\tmigration_state_id: wpmdb.migration_state_id,\n\t\t\t\tcompare: args.compare,\n\t\t\t\toffset: JSON.stringify( args.offset ),\n\t\t\t\tnonce: wpmdb_data.nonces.remove_files_recursive\n\t\t\t},\n\t\t\terror: function( jqXHR, textStatus, errorThrown ) {\n\t\t\t\twpmdb.current_migration.setState( wpmdbmf_strings.migration_failed, wpmdb.functions.wpmdbGetAjaxErrors( wpmdbmf_strings.error_determining, '(#101mf)', jqXHR.responseText, jqXHR ), 'error' );\n\t\t\t\tconsole.log( jqXHR );\n\t\t\t\tconsole.log( textStatus );\n\t\t\t\tconsole.log( errorThrown );\n\t\t\t\twpmdb.common.migration_error = true;\n\t\t\t\twpmdb.functions.migration_complete_events();\n\t\t\t\treturn;\n\t\t\t},\n\t\t\tsuccess: function( data ) {\n\t\t\t\tvar original_data = data;\n\t\t\t\targs = wpmdb.functions.wpmdb_parse_json( $.trim( data ) );\n\t\t\t\tif ( !args ) {\n\t\t\t\t\tmigration_failed( original_data );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( 'undefined' !== typeof args.wpmdb_error && 1 === args.wpmdb_error ) {\n\t\t\t\t\tmigration_failed( args.body );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( 'undefined' !== typeof args.wpmdb_non_fatal_error && 1 === args.wpmdb_non_fatal_error ) {\n\t\t\t\t\twpmdb.common.non_fatal_errors += args.body;\n\t\t\t\t}\n\n\t\t\t\t// persist settings\n\t\t\t\targs.next_step_in_migration = old_args.next_step_in_migration;\n\n\t\t\t\twpmdb.common.next_step_in_migration = {\n\t\t\t\t\tfn: wpmdb.functions.remove_files_recursive,\n\t\t\t\t\targs: [ args ]\n\t\t\t\t};\n\t\t\t\twpmdb.functions.execute_next_step();\n\t\t\t}\n\t\t} );\n\t};\n\n\twpmdb.functions.prepare_determine_media = function() {\n\t\twpmdb.mediaFiles.connection_info = $.trim( $( '.pull-push-connection-info' ).val() ).split( '\\n' );\n\t\tremote_max_upload_size = 0;\n\n\t\tvar remove_local_media = 0;\n\t\tvar copy_entire_media = 0;\n\t\tvar media_type = $( 'input[name=\"media_migration_option\"]:checked' ).val();\n\n\t\twpmdb.current_migration.setText( '0% - ' + wpmdbmf_strings.determining );\n\n\t\tif ( 'compare-remove' === media_type ) {\n\t\t\tmedia_type = 'compare';\n\t\t\tremove_local_media = 1;\n\t\t}\n\t\tif ( 'entire' === media_type ) {\n\t\t\tcopy_entire_media = 1;\n\t\t}\n\n\t\tvar args = {};\n\n\t\t$.ajax( {\n\t\t\turl: ajaxurl,\n\t\t\ttype: 'POST',\n\t\t\tdataType: 'text',\n\t\t\tcache: false,\n\t\t\tdata: {\n\t\t\t\taction: 'wpmdbmf_prepare_determine_media',\n\t\t\t\tmigration_state_id: wpmdb.migration_state_id,\n\t\t\t\tnonce: wpmdb_data.nonces.prepare_determine_media\n\t\t\t},\n\t\t\terror: function( jqXHR, textStatus, errorThrown ) {\n\t\t\t\twpmdb.current_migration.setState( wpmdbmf_strings.migration_failed, wpmdb.functions.wpmdbGetAjaxErrors( wpmdbmf_strings.error_determining, '(#101mf)', jqXHR.responseText, jqXHR ), 'error' );\n\t\t\t\tconsole.log( jqXHR );\n\t\t\t\tconsole.log( textStatus );\n\t\t\t\tconsole.log( errorThrown );\n\t\t\t\twpmdb.common.migration_error = true;\n\t\t\t\twpmdb.functions.migration_complete_events();\n\t\t\t\treturn;\n\t\t\t},\n\t\t\tsuccess: function( data ) {\n\t\t\t\tvar original_data = data;\n\t\t\t\targs =  wpmdb.functions.wpmdb_parse_json( $.trim( data ) );\n\t\t\t\tif ( !args ) {\n\t\t\t\t\tmigration_failed( original_data );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( 'undefined' !== typeof args.wpmdb_error && 1 === args.wpmdb_error ) {\n\t\t\t\t\tmigration_failed( args.body );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tremote_max_upload_size = args.remote_max_upload_size;\n\n\t\t\t\targs.determine_progress = 0;\n\t\t\t\targs.remove_local_media = remove_local_media;\n\t\t\t\targs.copy_entire_media = copy_entire_media;\n\n\t\t\t\twpmdb.common.next_step_in_migration = {\n\t\t\t\t\tfn: wpmdb.functions.determine_media_to_migrate_recursive,\n\t\t\t\t\targs: [ args ]\n\t\t\t\t};\n\t\t\t\twpmdb.functions.execute_next_step();\n\t\t\t}\n\t\t} );\n\t};\n\n\twpmdb.functions.determine_media_to_migrate_recursive = function( args ) {\n\t\tif ( args.determine_progress >= args.attachment_count ) {\n\n\t\t\t// migrate files\n\t\t\twpmdb.common.next_step_in_migration = { fn: wpmdb.functions.media_successfully_determined, args: [ args ] };\n\t\t\twpmdb.functions.execute_next_step();\n\t\t\treturn;\n\t\t}\n\n\t\twpmdb.mediaFiles.connection_info = $.trim( $( '.pull-push-connection-info' ).val() ).split( '\\n' );\n\n\t\t$.ajax( {\n\t\t\turl: ajaxurl,\n\t\t\ttype: 'POST',\n\t\t\tdataType: 'text',\n\t\t\tcache: false,\n\t\t\tdata: {\n\t\t\t\taction: 'wpmdbmf_determine_media_to_migrate_recursive',\n\t\t\t\tmigration_state_id: wpmdb.migration_state_id,\n\t\t\t\tdetermine_progress: args.determine_progress,\n\t\t\t\tattachment_count: args.attachment_count,\n\t\t\t\tremote_uploads_url: args.remote_uploads_url,\n\t\t\t\tremove_local_media: args.remove_local_media,\n\t\t\t\tcopy_entire_media: args.copy_entire_media,\n\t\t\t\tblogs: args.blogs,\n\t\t\t\tattachment_batch_limit: args.attachment_batch_limit,\n\t\t\t\tnonce: wpmdb_data.nonces.determine_media_to_migrate_recursive\n\t\t\t},\n\t\t\terror: function( jqXHR, textStatus, errorThrown ) {\n\t\t\t\twpmdb.current_migration.setState( wpmdbmf_strings.migration_failed, wpmdbmf_strings.error_determining + ' (#101mf)', 'error' );\n\t\t\t\tconsole.log( jqXHR );\n\t\t\t\tconsole.log( textStatus );\n\t\t\t\tconsole.log( errorThrown );\n\t\t\t\twpmdb.common.migration_error = true;\n\t\t\t\twpmdb.functions.migration_complete_events();\n\t\t\t\treturn;\n\t\t\t},\n\t\t\tsuccess: function( data ) {\n\t\t\t\tvar original_data = data;\n\t\t\t\tdata =  wpmdb.functions.wpmdb_parse_json( $.trim( data ) );\n\t\t\t\tif ( !data ) {\n\t\t\t\t\tmigration_failed( original_data );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( 'undefined' !== typeof data.wpmdb_error && 1 === data.wpmdb_error ) {\n\t\t\t\t\tmigration_failed( data.body );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\targs.blogs = data.blogs;\n\t\t\t\targs.determine_progress = data.determine_progress;\n\t\t\t\targs.total_size = args.total_size || 0;\n\t\t\t\targs.total_size += data.total_size;\n\t\t\t\targs.files_to_migrate = args.files_to_migrate || {};\n\n\t\t\t\t_.each( data.files_to_migrate, function( data, filepath ) {\n\t\t\t\t\targs.files_to_migrate[ filepath ] = data;\n\t\t\t\t\twpmdb.current_migration.model.addStageItem( 'media', filepath, parseInt( data / 1024 ) );\n\t\t\t\t} );\n\n\t\t\t\twpmdb.current_migration.fixProgressStageWidthForScrollBar();\n\n\t\t\t\tvar percent =  Math.min( 100, 100 * args.determine_progress / args.attachment_count );\n\t\t\t\tvar overall_percent = Math.floor( percent );\n\n\t\t\t\t// Not \"real\" progress as far as model is concerned, so we force the progress bar to show media determine progress by accessing it directly\n\t\t\t\t$( '.migration-progress-stage-container[data-stage=media]' ).addClass( 'determining-media' );\n\t\t\t\t$( '.progress-bar', '.stage-progress.media' ).width( percent + '%' );\n\t\t\t\twpmdb.current_migration.setText( overall_percent + '% - ' + wpmdbmf_strings.determining );\n\n\t\t\t\twpmdb.common.next_step_in_migration = {\n\t\t\t\t\tfn: wpmdb.functions.determine_media_to_migrate_recursive,\n\t\t\t\t\targs: [ args ]\n\t\t\t\t};\n\t\t\t\twpmdb.functions.execute_next_step();\n\t\t\t}\n\n\t\t} );\n\t};\n\n\twpmdb.functions.media_successfully_determined = function( args ) {\n\t\tif ( 'undefined' !== typeof args.wpmdb_error && 1 === args.wpmdb_error ) {\n\t\t\twpmdb.common.non_fatal_errors += data.body;\n\t\t\twpmdb.common.next_step_in_migration = { fn: wpmdb.functions.wpmdb_call_next_hook };\n\t\t\twpmdb.functions.execute_next_step();\n\t\t\treturn;\n\t\t}\n\n\t\targs.media_progress = 0;\n\t\targs.media_progress_image_number = 0;\n\t\targs.bottleneck = wpmdb_data.max_request;\n\t\targs.files_to_migrate = args.files_to_migrate || {};\n\n\t\tvar title = 'migrate_media_files_' + wpmdb.functions.wpmdb_migration_type();\n\t\twpmdb.current_migration.setText( wpmdbmf_strings[ title ] );\n\n\t\t$( '.migration-progress-stage-container[data-stage=media]' ).removeClass( 'determining-media' );\n\n\t\twpmdb.common.next_step_in_migration = { fn: migrate_media_files_recursive, args: [ args ] };\n\t\twpmdb.functions.execute_next_step();\n\t};\n\n\tfunction migrate_media_files_recursive( args ) {\n\t\tif ( 0 === Object.size( args.files_to_migrate ) ) {\n\n\t\t\tdelete args.files_to_migrate;\n\t\t\tdelete args.total_size;\n\n\t\t\t// Wait for the UI to update before saying media has completely transferred\n\t\t\tsetTimeout( function() {\n\t\t\t\t$.wpmdb.do_action( 'wpmdbmf_media_transfer_complete' );\n\t\t\t}, wpmdb.mediaFiles.remote_connection_data.media_files_max_file_uploads * 100 );\n\n\t\t\twpmdb.common.next_step_in_migration = {\n\t\t\t\tfn: wpmdb.functions.finalise_media_migration,\n\t\t\t\targs: [ args ]\n\t\t\t};\n\t\t\twpmdb.functions.execute_next_step();\n\t\t\treturn;\n\t\t}\n\n\t\tvar file_chunk_to_migrate = [];\n\t\tvar file_chunk_size = 0;\n\t\tvar number_of_files_to_migrate = 0;\n\n\t\t$.each( args.files_to_migrate, function( index, value ) {\n\t\t\tif ( 'push' === wpmdb.functions.wpmdb_migration_type() && value > remote_max_upload_size ) {\n\t\t\t\tvar error_msg = wpmdbmf_strings.file_too_large + ' ' + index + ' (#124mf)<br>';\n\t\t\t\twpmdb.common.non_fatal_errors += error_msg;\n\t\t\t} else if ( !file_chunk_to_migrate.length ) {\n\t\t\t\tfile_chunk_to_migrate.push( index );\n\t\t\t\tfile_chunk_size += value;\n\t\t\t} else {\n\t\t\t\tif ( ( file_chunk_size + value ) > args.bottleneck ||\n\t\t\t\t\tnumber_of_files_to_migrate >= wpmdb.mediaFiles.remote_connection_data.media_files_max_file_uploads ) {\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\tfile_chunk_to_migrate.push( index );\n\t\t\t\t\tfile_chunk_size += value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdelete args.files_to_migrate[ index ];\n\t\t\t++args.media_progress_image_number;\n\t\t\t++number_of_files_to_migrate;\n\t\t} );\n\n\t\tif ( wpmdb.common.migration_error ) {\n\t\t\twpmdb.functions.migration_complete_events();\n\t\t\treturn;\n\t\t}\n\n\t\t// If nothing made it into this batch let the top of the function determine whether to do another or move on a step.\n\t\tif ( !file_chunk_to_migrate.length ) {\n\n\t\t\twpmdb.common.next_step_in_migration = { fn: migrate_media_files_recursive, args: [ args ] };\n\t\t\twpmdb.functions.execute_next_step();\n\t\t\treturn;\n\t\t}\n\n\t\t$.ajax( {\n\t\t\turl: ajaxurl,\n\t\t\ttype: 'POST',\n\t\t\tdataType: 'text',\n\t\t\tcache: false,\n\t\t\tdata: {\n\t\t\t\taction: 'wpmdbmf_migrate_media',\n\t\t\t\tmigration_state_id: wpmdb.migration_state_id,\n\t\t\t\tfile_chunk: file_chunk_to_migrate,\n\t\t\t\tnonce: wpmdb_data.nonces.migrate_media\n\t\t\t},\n\t\t\terror: function( jqXHR, textStatus, errorThrown ) {\n\t\t\t\twpmdb.current_migration.setState( wpmdbmf_strings.migration_failed, wpmdb.functions.wpmdbGetAjaxErrors( wpmdbmf_strings.migration_failed, '(#102mf)', jqXHR.responseText, jqXHR ), 'error' );\n\t\t\t\tconsole.log( jqXHR );\n\t\t\t\tconsole.log( textStatus );\n\t\t\t\tconsole.log( errorThrown );\n\t\t\t\twpmdb.common.migration_error = true;\n\t\t\t\twpmdb.functions.migration_complete_events();\n\t\t\t\treturn;\n\t\t\t},\n\t\t\tsuccess: function( data ) {\n\t\t\t\tvar original_data = data;\n\t\t\t\tdata = wpmdb.functions.wpmdb_parse_json( $.trim( data ) );\n\t\t\t\tif ( !data ) {\n\t\t\t\t\tmigration_failed( original_data );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( 'undefined' !== typeof data.wpmdb_error && 1 === data.wpmdb_error ) {\n\t\t\t\t\tmigration_failed( data.body );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( 'undefined' !== typeof data.wpmdb_non_fatal_error && 1 === data.wpmdb_non_fatal_error ) {\n\t\t\t\t\twpmdb.common.non_fatal_errors += data.body;\n\t\t\t\t}\n\n\t\t\t\tif ( data.transfers && data.transfers.length ) {\n\t\t\t\t\tvar timeout = 0;\n\t\t\t\t\t$.each( data.transfers, function( i, transfer ) {\n\n\t\t\t\t\t\t// timeout used to stagger display of progress bars filling\n\t\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t\twpmdb.current_migration.model.getStageModel( 'media' ).setItemComplete( transfer.file );\n\t\t\t\t\t\t}, timeout );\n\t\t\t\t\t\ttimeout += 50;\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\targs.media_progress += file_chunk_size;\n\n\t\t\t\twpmdb.common.next_step_in_migration = { fn: migrate_media_files_recursive, args: [ args ] };\n\t\t\t\twpmdb.functions.execute_next_step();\n\t\t\t}\n\n\t\t} );\n\t}\n\n\twpmdb.functions.finalise_media_migration = function( args ) {\n\n\t\t// If removing local media not found on remote\n\t\tif ( 1 === args.remove_local_media ) {\n\n\t\t\t// Start recursive batch delete of local files not found on remote\n\t\t\tvar title = 'removing_files_' + wpmdb.functions.wpmdb_migration_type();\n\t\t\twpmdb.current_migration.setText( wpmdbmf_strings[ title ] );\n\n\t\t\targs = {};\n\t\t\targs.remove_files = 1;\n\t\t\targs.compare = 1;\n\t\t\targs.offset = '';\n\t\t\targs.next_step_in_migration = false;\n\t\t\twpmdb.common.next_step_in_migration = { fn: wpmdb.functions.remove_files_recursive, args: [ args ] };\n\t\t\twpmdb.functions.execute_next_step();\n\t\t\treturn;\n\t\t}\n\n\t\twpmdb.functions.wpmdb_call_next_hook();\n\t};\n\n\tfunction migration_failed( data ) {\n\t\twpmdb.current_migration.setState( wpmdbmf_strings.migration_failed, wpmdb.functions.wpmdbGetAjaxErrors( '', '', data ), 'error' );\n\t\twpmdb.common.migration_error = true;\n\t\twpmdb.functions.migration_complete_events();\n\t}\n\n\twpmdb.functions.is_media_migration = function() {\n\t\tif ( '1' === $( '#media-files' ).attr( 'data-available' ) && $( '#media-files' ).is( ':checked' ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tfunction is_media_migration(){\n\t\treturn wpmdb.functions.is_media_migration();\n\t}\n\n\tfunction filter_migration_profile_ready( value, args ) {\n\t\tif ( 'savefile' !== wpmdb.functions.wpmdb_migration_type() && $( '#media-files' ).is( ':checked' ) ) {\n\n\t\t\t// Check that at least one subsite is selected if using limit to selected subsites option.\n\t\t\tif ( 'true' === wpmdb_data.is_multisite && $mf_select_subsites.is( ':checked' ) ) {\n\t\t\t\tif ( null === $( '#mf-selected-subsites' ).val() ) {\n\t\t\t\t\talert( wpmdbmf_strings.please_select_a_subsite );\n\t\t\t\t\tvalue = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tfunction compare_remove_warning_toggle() {\n\t\tvar element = $( 'input[name=\"media_migration_option\"][value=\"compare-remove\"]' );\n\t\tif ( $( element ).is( ':checked' ) ) {\n\t\t\t$( '.compare-remove-warning' ).show();\n\t\t} else {\n\t\t\t$( '.compare-remove-warning' ).hide();\n\t\t}\n\t}\n\n\tfunction get_subsites() {\n\t\tvar subsites = {};\n\t\tif ( 'pull' === wpmdb.functions.wpmdb_migration_type() ) {\n\t\t\tif ( 'undefined' !== typeof wpmdb.mediaFiles.remote_connection_data && 'undefined' !== typeof wpmdb.mediaFiles.remote_connection_data.subsites ) {\n\t\t\t\tsubsites = wpmdb.mediaFiles.remote_connection_data.subsites;\n\t\t\t}\n\t\t} else if ( undefined !== wpmdb_data.subsites ) {\n\t\t\tsubsites = wpmdb_data.subsites;\n\t\t}\n\n\t\treturn subsites;\n\t}\n\n\tfunction maybe_show_data_and_files_differ_notice() {\n\t\tvar $notice = $( '.mf-selected-subsites-tables-differ' );\n\t\tvar selected_subsites = $( '#mf-selected-subsites' ).val();\n\t\tvar selected_tables = $.wpmdb.apply_filters( 'wpmdb_get_tables_to_migrate', null, null );\n\n\t\tif ( 'true' === wpmdb_data.is_multisite &&\n\t\t     $mf_select_subsites.is( ':checked' ) &&\n\t\t     undefined !== selected_subsites &&\n\t\t     null !== selected_subsites &&\n\t\t     undefined !== selected_tables &&\n\t\t     null !== selected_tables &&\n\t\t     0 < selected_tables.length ) {\n\t\t\tvar table_prefix = $.wpmdb.apply_filters( 'wpmdb_get_table_prefix', null, null );\n\t\t\tvar files_differ = false;\n\n\t\t\t$.each( selected_tables, function( index, table_name ) {\n\t\t\t\tif ( wpmdb.functions.table_is( table_prefix, 'posts', table_name ) || wpmdb.functions.table_is( table_prefix, 'postmeta', table_name ) ) {\n\t\t\t\t\tvar id = wpmdb.functions.subsite_for_table( table_prefix, table_name );\n\t\t\t\t\tif ( 0 > $.inArray( id.toString(), selected_subsites ) ) {\n\t\t\t\t\t\tfiles_differ = true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tif ( files_differ ) {\n\t\t\t\t$notice.show();\n\t\t\t} else {\n\t\t\t\t$notice.hide();\n\t\t\t}\n\t\t} else {\n\t\t\t$notice.hide();\n\t\t}\n\t}\n\n\tfunction maybe_add_mf_progress_stage( args ) {\n\t\tif ( true === is_media_migration() && -1 === $.inArray( wpmdb.functions.wpmdb_migration_type(), [ 'savefile', 'find_replace', 'import' ] ) ) {\n\t\t\twpmdb.current_migration.model.addStage( 'media', [], args.dataType, {\n\t\t\t\tstrings: {\n\t\t\t\t\titemsName: wpmdb_strings.files\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\t$( document ).ready( function() {\n\n\t\tif ( -1 !== $.inArray( wpmdb.functions.wpmdb_migration_type(), [ 'savefile', 'find_replace', 'import' ] ) ) {\n\t\t\t$( '.media-files-options' ).hide();\n\t\t}\n\n\t\t$.wpmdb.add_action( 'move_connection_info_box', function() {\n\t\t\thide_show_options( wpmdb.mediaFiles.remote_media_files_unavailable );\n\t\t\twpmdb.functions.wpmdb_toggle_migration_action_text();\n\t\t} );\n\n\t\t$.wpmdb.add_action( 'verify_connection_to_remote_site', function( connection_data ) {\n\t\t\twpmdb.mediaFiles.remote_connection_data = connection_data;\n\t\t\twpmdb.mediaFiles.remote_media_files_unavailable = ( 'undefined' === typeof connection_data.media_files_available );\n\t\t\thide_show_options( wpmdb.mediaFiles.remote_media_files_unavailable );\n\t\t} );\n\n\t\t$.wpmdb.add_action( 'wpmdbmst_select_subsite_changed', function() {\n\t\t\thide_show_options( wpmdb.mediaFiles.remote_media_files_unavailable );\n\t\t} );\n\n\t\t$.wpmdb.add_filter( 'wpmdb_before_migration_complete_hooks', function( hooks ) {\n\t\t\tif ( false === is_media_migration() || -1 === $.inArray( wpmdb.functions.wpmdb_migration_type(), [ 'push', 'pull' ] ) ) {\n\t\t\t\treturn hooks;\n\t\t\t}\n\t\t\thooks.push( wpmdb.functions.prepare_remove_all_files );\n\t\t\treturn hooks;\n\t\t} );\n\n\t\t$( 'body' ).on( 'change', '#mf-select-subsites', function() {\n\t\t\t$.wpmdb.do_action( 'wpmdbmf_selected_subsites_changed' );\n\t\t} );\n\n\t\t$( 'body' ).on( 'change', '#mf-selected-subsites', function() {\n\t\t\t$.wpmdb.do_action( 'wpmdbmf_selected_subsites_changed' );\n\t\t} );\n\n\t\t$.wpmdb.add_filter( 'wpmdb_migration_profile_ready', filter_migration_profile_ready );\n\t\t$.wpmdb.add_action( 'wpmdb_tables_to_migrate_changed', maybe_show_data_and_files_differ_notice );\n\t\t$.wpmdb.add_action( 'wpmdbmf_selected_subsites_changed', maybe_show_data_and_files_differ_notice );\n\n\t\t$.wpmdb.add_action( 'wpmdb_add_migration_stages', maybe_add_mf_progress_stage );\n\n\t\t$( 'input[name=\"media_migration_option\"]' ).change( function() {\n\t\t\tcompare_remove_warning_toggle();\n\t\t} );\n\n\t\tcompare_remove_warning_toggle();\n\t} );\n\n})( jQuery, wpmdb );\n\n\n\n// WEBPACK FOOTER //\n// ./src/wp-migrate-db-pro-media-files/asset/src/js/script.js","/*** IMPORTS FROM imports-loader ***/\nvar $ = window.jQuery;\n\n// removed by extract-text-webpack-plugin\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/imports-loader?$=>window.jQuery!./src/wp-migrate-db-pro-media-files/asset/src/sass/styles.scss\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}